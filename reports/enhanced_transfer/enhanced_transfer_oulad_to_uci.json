{
  "shift_diagnostics": {
    "feature_shift": {
      "engagement_proxy": {
        "feature": "engagement_proxy",
        "psi": 14.731290125064222,
        "ks_statistic": 0.973,
        "ks_pvalue": 9.4e-323,
        "source_mean": 1.5631940186722205e-17,
        "target_mean": -1.5711425982848342,
        "source_std": 1.0,
        "target_std": 0.0007958039176585531
      },
      "ses_proxy": {
        "feature": "ses_proxy",
        "psi": 10.058448980333683,
        "ks_statistic": 0.5892,
        "ks_pvalue": 1.1719144870983422e-120,
        "source_mean": 4.4466,
        "target_mean": 1.7569620253164557,
        "source_std": 2.8795743504900164,
        "target_std": 1.0775832716865472
      },
      "sex": {
        "feature": "sex",
        "psi": 0.005125225057705345,
        "ks_statistic": 0.03578227848101266,
        "ks_pvalue": 0.7216998585013413,
        "source_mean": 0.5092,
        "target_mean": 0.47341772151898737,
        "source_std": 0.4999153528348575,
        "target_std": 0.49929288245553616
      },
      "academic_proxy": {
        "feature": "academic_proxy",
        "psi": 17.14701967781683,
        "ks_statistic": 1.0,
        "ks_pvalue": 5e-324,
        "source_mean": 8.526512829121202e-17,
        "target_mean": -2.1894228200413575,
        "source_std": 1.0,
        "target_std": 0.005872047274731256
      },
      "age_band": {
        "feature": "age_band",
        "psi": 6.794847118943761,
        "ks_statistic": 0.5863822784810127,
        "ks_pvalue": 2.0982920112364157e-119,
        "source_mean": 0.9966,
        "target_mean": 0.07341772151898734,
        "source_std": 0.8227930724064223,
        "target_std": 0.2608209341405474
      }
    },
    "domain_metrics": {
      "proxy_a_distance": 2.0,
      "domain_classifier_auc": 1.0,
      "domain_classifier_auc_std": 0.0
    },
    "label_shift": {
      "source_proportions": [
        0.598,
        0.402
      ],
      "estimated_target_proportions": [
        1.0,
        0.0
      ],
      "label_shift_detected": "True"
    },
    "summary": {
      "total_features_analyzed": 5,
      "top_shifting_features_psi": [
        "academic_proxy",
        "engagement_proxy",
        "ses_proxy",
        "age_band",
        "sex"
      ],
      "features_with_significant_ks": [
        "engagement_proxy",
        "ses_proxy",
        "academic_proxy",
        "age_band"
      ],
      "mean_psi": 9.747346225443241,
      "median_psi": 10.058448980333683,
      "max_psi": 17.14701967781683
    }
  },
  "baseline": {
    "accuracy": 0.5063291139240507,
    "balanced_accuracy": 0.5007982583454281,
    "roc_auc": 0.4815820029027576
  },
  "importance_weighting": {
    "weight_stats": {
      "mean": 1.0,
      "std": 2.827732615492654,
      "min": 1.333471354527644e-14,
      "max": 11.53988035159517,
      "median": 0.0005969215748673987,
      "effective_sample_size": 555.798146333604
    },
    "covariate_balance": {
      "mean_standardized_diff": 1.0658798993066503,
      "max_standardized_diff": 2.0811764808251683,
      "features_with_large_diff": 4
    }
  },
  "coral_alignment": {
    "frobenius_norm_before": 7.296116235694866,
    "frobenius_norm_after": 1.198538307534176e-15,
    "alignment_improvement": 7.296116235694865,
    "relative_improvement": 0.9999999999999999,
    "source_cov_condition": 33.21020755547902,
    "target_cov_condition": 752771.1462650221
  },
  "adapted_model": {
    "accuracy": 0.369620253164557,
    "balanced_accuracy": 0.49687953555878084,
    "roc_auc": 0.43532656023222066
  },
  "label_shift_corrected": {
    "accuracy": 0.6708860759493671,
    "balanced_accuracy": 0.5,
    "roc_auc": 0.43532656023222066,
    "shift_metrics": {
      "total_variation_distance": 0.5979920374184245,
      "kl_divergence": 0.911198470804264,
      "max_class_difference": 0.5979920374184253,
      "chi_square_statistic": 1.4875225744847613,
      "shift_detected": "True"
    }
  },
  "summary": {
    "performance_comparison": {
      "baseline": {
        "accuracy": 0.5063291139240507,
        "balanced_accuracy": 0.5007982583454281,
        "roc_auc": 0.4815820029027576
      },
      "adapted_model": {
        "accuracy": 0.369620253164557,
        "balanced_accuracy": 0.49687953555878084,
        "roc_auc": 0.43532656023222066
      },
      "label_shift_corrected": {
        "accuracy": 0.6708860759493671,
        "balanced_accuracy": 0.5,
        "roc_auc": 0.43532656023222066
      }
    },
    "best_method": "label_shift_corrected",
    "source_domain": "oulad",
    "target_domain": "uci",
    "methods_used": [
      "importance_weighting",
      "label_shift_correction",
      "coral"
    ]
  }
}